<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç»ƒä¹ é¢˜1ï¼šè®¡ç®—å±æ€§åŸºç¡€ - Vue3</title>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #74b9ff 0%, #0984e3 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #74b9ff 0%, #0984e3 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.2em;
            margin-bottom: 10px;
        }

        .content {
            padding: 30px;
        }

        .exercise {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 25px;
            margin-bottom: 30px;
            border-left: 5px solid #74b9ff;
        }

        .exercise-title {
            font-size: 1.4em;
            color: #2d3436;
            margin-bottom: 15px;
            font-weight: bold;
        }

        .exercise-description {
            color: #636e72;
            margin-bottom: 20px;
            line-height: 1.6;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
            color: #2d3436;
        }

        .form-group input, .form-group select {
            width: 100%;
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s ease;
        }

        .form-group input:focus, .form-group select:focus {
            outline: none;
            border-color: #74b9ff;
        }

        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        .result-card {
            background: white;
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            text-align: center;
            border: 2px solid #e9ecef;
        }

        .result-value {
            font-size: 2em;
            font-weight: bold;
            color: #74b9ff;
            margin-bottom: 5px;
        }

        .result-label {
            color: #636e72;
            font-size: 0.9em;
        }

        .student-list {
            background: white;
            border-radius: 8px;
            padding: 20px;
            margin-top: 20px;
        }

        .student-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px;
            border-bottom: 1px solid #e9ecef;
            transition: background 0.3s ease;
        }

        .student-item:hover {
            background: #f8f9fa;
        }

        .student-item:last-child {
            border-bottom: none;
        }

        .student-name {
            font-weight: bold;
            color: #2d3436;
        }

        .student-scores {
            display: flex;
            gap: 15px;
            font-size: 0.9em;
            color: #636e72;
        }

        .student-average {
            font-weight: bold;
            color: #00b894;
        }

        .grade-excellent {
            color: #00b894;
            font-weight: bold;
        }

        .grade-good {
            color: #fdcb6e;
            font-weight: bold;
        }

        .grade-poor {
            color: #e17055;
            font-weight: bold;
        }

        .add-student {
            background: #74b9ff;
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            transition: background 0.3s ease;
            margin-top: 15px;
        }

        .add-student:hover {
            background: #0984e3;
        }

        .tips {
            background: #e8f4fd;
            border: 1px solid #74b9ff;
            border-radius: 8px;
            padding: 15px;
            margin-top: 20px;
        }

        .tips h4 {
            color: #0984e3;
            margin-bottom: 10px;
        }

        .tips ul {
            color: #636e72;
            padding-left: 20px;
        }

        .tips li {
            margin-bottom: 5px;
        }
    </style>
</head>
<body>
    <div id="app">
        <div class="container">
            <div class="header">
                <h1>ğŸ“Š ç»ƒä¹ é¢˜1ï¼šè®¡ç®—å±æ€§åŸºç¡€</h1>
                <p>å­¦ç”Ÿæˆç»©ç®¡ç†ç³»ç»Ÿ - æŒæ¡computedçš„åŸºæœ¬ç”¨æ³•</p>
            </div>

            <div class="content">
                <!-- ç»ƒä¹ 1ï¼šåŸºç¡€è®¡ç®—å±æ€§ -->
                <div class="exercise">
                    <h2 class="exercise-title">ğŸ¯ ç»ƒä¹ 1ï¼šå­¦ç”Ÿæˆç»©ç»Ÿè®¡</h2>
                    <p class="exercise-description">
                        åˆ›å»ºä¸€ä¸ªå­¦ç”Ÿæˆç»©ç®¡ç†ç³»ç»Ÿï¼Œä½¿ç”¨è®¡ç®—å±æ€§å®ç°å¹³å‡åˆ†ã€åŠæ ¼ç‡ã€æœ€é«˜åˆ†ã€æœ€ä½åˆ†ç­‰ç»Ÿè®¡åŠŸèƒ½ã€‚
                    </p>

                    <!-- æ·»åŠ å­¦ç”Ÿè¡¨å• -->
                    <div class="grid">
                        <div class="form-group">
                            <label>å­¦ç”Ÿå§“å:</label>
                            <input type="text" v-model="newStudent.name" placeholder="è¯·è¾“å…¥å­¦ç”Ÿå§“å">
                        </div>
                        <div class="form-group">
                            <label>æ•°å­¦æˆç»©:</label>
                            <input type="number" v-model.number="newStudent.math" min="0" max="100" placeholder="0-100">
                        </div>
                        <div class="form-group">
                            <label>è¯­æ–‡æˆç»©:</label>
                            <input type="number" v-model.number="newStudent.chinese" min="0" max="100" placeholder="0-100">
                        </div>
                        <div class="form-group">
                            <label>è‹±è¯­æˆç»©:</label>
                            <input type="number" v-model.number="newStudent.english" min="0" max="100" placeholder="0-100">
                        </div>
                    </div>
                    <button class="add-student" @click="addStudent">æ·»åŠ å­¦ç”Ÿ</button>

                    <!-- ç»Ÿè®¡ç»“æœ -->
                    <div class="grid" style="margin-top: 30px;">
                        <div class="result-card">
                            <div class="result-value">{{ totalStudents }}</div>
                            <div class="result-label">å­¦ç”Ÿæ€»æ•°</div>
                        </div>
                        <div class="result-card">
                            <div class="result-value">{{ classAverage.toFixed(1) }}</div>
                            <div class="result-label">ç­çº§å¹³å‡åˆ†</div>
                        </div>
                        <div class="result-card">
                            <div class="result-value">{{ passRate.toFixed(1) }}%</div>
                            <div class="result-label">åŠæ ¼ç‡</div>
                        </div>
                        <div class="result-card">
                            <div class="result-value">{{ excellentRate.toFixed(1) }}%</div>
                            <div class="result-label">ä¼˜ç§€ç‡ (â‰¥90)</div>
                        </div>
                        <div class="result-card">
                            <div class="result-value">{{ highestScore }}</div>
                            <div class="result-label">æœ€é«˜åˆ†</div>
                        </div>
                        <div class="result-card">
                            <div class="result-value">{{ lowestScore }}</div>
                            <div class="result-label">æœ€ä½åˆ†</div>
                        </div>
                    </div>

                    <!-- å­¦ç”Ÿåˆ—è¡¨ -->
                    <div class="student-list" v-if="students.length > 0">
                        <h3 style="margin-bottom: 20px; color: #2d3436;">ğŸ“‹ å­¦ç”Ÿæˆç»©è¯¦æƒ…</h3>
                        <div v-for="(student, index) in students" :key="index" class="student-item">
                            <div class="student-name">{{ student.name }}</div>
                            <div class="student-scores">
                                <span>æ•°å­¦: {{ student.math }}</span>
                                <span>è¯­æ–‡: {{ student.chinese }}</span>
                                <span>è‹±è¯­: {{ student.english }}</span>
                                <span class="student-average">å¹³å‡: {{ getStudentAverage(student).toFixed(1) }}</span>
                                <span :class="getGradeClass(getStudentAverage(student))">{{ getGradeText(getStudentAverage(student)) }}</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- ç»ƒä¹ 2ï¼šå¤æ‚è®¡ç®—å±æ€§ -->
                <div class="exercise">
                    <h2 class="exercise-title">ğŸ¯ ç»ƒä¹ 2ï¼šæˆç»©åˆ†æä¸æ’å</h2>
                    <p class="exercise-description">
                        ä½¿ç”¨è®¡ç®—å±æ€§å®ç°æ›´å¤æ‚çš„æ•°æ®åˆ†æï¼ŒåŒ…æ‹¬å­¦ç§‘æ’åã€æˆç»©åˆ†å¸ƒã€æ ‡å‡†å·®ç­‰ã€‚
                    </p>

                    <div class="grid">
                        <div class="result-card">
                            <div class="result-value">{{ mathAverage.toFixed(1) }}</div>
                            <div class="result-label">æ•°å­¦å¹³å‡åˆ†</div>
                        </div>
                        <div class="result-card">
                            <div class="result-value">{{ chineseAverage.toFixed(1) }}</div>
                            <div class="result-label">è¯­æ–‡å¹³å‡åˆ†</div>
                        </div>
                        <div class="result-card">
                            <div class="result-value">{{ englishAverage.toFixed(1) }}</div>
                            <div class="result-label">è‹±è¯­å¹³å‡åˆ†</div>
                        </div>
                        <div class="result-card">
                            <div class="result-value">{{ bestSubject }}</div>
                            <div class="result-label">æœ€å¼ºå­¦ç§‘</div>
                        </div>
                        <div class="result-card">
                            <div class="result-value">{{ standardDeviation.toFixed(2) }}</div>
                            <div class="result-label">æˆç»©æ ‡å‡†å·®</div>
                        </div>
                        <div class="result-card">
                            <div class="result-value">{{ topStudent?.name || 'æš‚æ— ' }}</div>
                            <div class="result-label">ç¬¬ä¸€å</div>
                        </div>
                    </div>

                    <!-- æ’ååˆ—è¡¨ -->
                    <div class="student-list" v-if="rankedStudents.length > 0">
                        <h3 style="margin-bottom: 20px; color: #2d3436;">ğŸ† å­¦ç”Ÿæ’å</h3>
                        <div v-for="(student, index) in rankedStudents" :key="index" class="student-item">
                            <div class="student-name">
                                <span style="color: #74b9ff; font-weight: bold;">ç¬¬{{ index + 1 }}å</span>
                                {{ student.name }}
                            </div>
                            <div class="student-scores">
                                <span>æ€»å¹³å‡: {{ getStudentAverage(student).toFixed(1) }}</span>
                                <span :class="getGradeClass(getStudentAverage(student))">{{ getGradeText(getStudentAverage(student)) }}</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- å­¦ä¹ æç¤º -->
                <div class="tips">
                    <h4>ğŸ’¡ å­¦ä¹ è¦ç‚¹</h4>
                    <ul>
                        <li><strong>è®¡ç®—å±æ€§ç¼“å­˜ï¼š</strong>åªæœ‰ä¾èµ–çš„å“åº”å¼æ•°æ®å‘ç”Ÿå˜åŒ–æ—¶æ‰ä¼šé‡æ–°è®¡ç®—</li>
                        <li><strong>è‡ªåŠ¨ä¾èµ–è¿½è¸ªï¼š</strong>Vueä¼šè‡ªåŠ¨è¿½è¸ªè®¡ç®—å±æ€§ä¸­ä½¿ç”¨çš„å“åº”å¼æ•°æ®</li>
                        <li><strong>æ€§èƒ½ä¼˜åŒ–ï¼š</strong>ç›¸æ¯”methodsï¼Œcomputedæœ‰ç¼“å­˜æœºåˆ¶ï¼Œé¿å…é‡å¤è®¡ç®—</li>
                        <li><strong>çº¯å‡½æ•°ï¼š</strong>è®¡ç®—å±æ€§åº”è¯¥æ˜¯çº¯å‡½æ•°ï¼Œä¸åº”è¯¥æœ‰å‰¯ä½œç”¨</li>
                        <li><strong>å¤æ‚é€»è¾‘ï¼š</strong>å¯ä»¥åœ¨è®¡ç®—å±æ€§ä¸­ä½¿ç”¨å¤æ‚çš„JavaScripté€»è¾‘</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <script>
        const { createApp, ref, computed } = Vue

        createApp({
            setup() {
                // å“åº”å¼æ•°æ®
                const students = ref([
                    { name: 'å¼ ä¸‰', math: 85, chinese: 92, english: 78 },
                    { name: 'æå››', math: 76, chinese: 88, english: 82 },
                    { name: 'ç‹äº”', math: 94, chinese: 85, english: 90 },
                    { name: 'èµµå…­', math: 68, chinese: 75, english: 71 },
                    { name: 'é’±ä¸ƒ', math: 89, chinese: 91, english: 87 }
                ])

                const newStudent = ref({
                    name: '',
                    math: 0,
                    chinese: 0,
                    english: 0
                })

                // åŸºç¡€è®¡ç®—å±æ€§
                const totalStudents = computed(() => {
                    return students.value.length
                })

                const classAverage = computed(() => {
                    if (students.value.length === 0) return 0
                    
                    const total = students.value.reduce((sum, student) => {
                        return sum + (student.math + student.chinese + student.english) / 3
                    }, 0)
                    
                    return total / students.value.length
                })

                const passRate = computed(() => {
                    if (students.value.length === 0) return 0
                    
                    const passCount = students.value.filter(student => {
                        const average = (student.math + student.chinese + student.english) / 3
                        return average >= 60
                    }).length
                    
                    return (passCount / students.value.length) * 100
                })

                const excellentRate = computed(() => {
                    if (students.value.length === 0) return 0
                    
                    const excellentCount = students.value.filter(student => {
                        const average = (student.math + student.chinese + student.english) / 3
                        return average >= 90
                    }).length
                    
                    return (excellentCount / students.value.length) * 100
                })

                const highestScore = computed(() => {
                    if (students.value.length === 0) return 0
                    
                    return Math.max(...students.value.map(student => {
                        return Math.max(student.math, student.chinese, student.english)
                    }))
                })

                const lowestScore = computed(() => {
                    if (students.value.length === 0) return 0
                    
                    return Math.min(...students.value.map(student => {
                        return Math.min(student.math, student.chinese, student.english)
                    }))
                })

                // å­¦ç§‘å¹³å‡åˆ†
                const mathAverage = computed(() => {
                    if (students.value.length === 0) return 0
                    const total = students.value.reduce((sum, student) => sum + student.math, 0)
                    return total / students.value.length
                })

                const chineseAverage = computed(() => {
                    if (students.value.length === 0) return 0
                    const total = students.value.reduce((sum, student) => sum + student.chinese, 0)
                    return total / students.value.length
                })

                const englishAverage = computed(() => {
                    if (students.value.length === 0) return 0
                    const total = students.value.reduce((sum, student) => sum + student.english, 0)
                    return total / students.value.length
                })

                // æœ€å¼ºå­¦ç§‘
                const bestSubject = computed(() => {
                    const averages = {
                        'æ•°å­¦': mathAverage.value,
                        'è¯­æ–‡': chineseAverage.value,
                        'è‹±è¯­': englishAverage.value
                    }
                    
                    return Object.keys(averages).reduce((a, b) => 
                        averages[a] > averages[b] ? a : b
                    )
                })

                // æ ‡å‡†å·®
                const standardDeviation = computed(() => {
                    if (students.value.length === 0) return 0
                    
                    const mean = classAverage.value
                    const squaredDifferences = students.value.map(student => {
                        const studentAvg = (student.math + student.chinese + student.english) / 3
                        return Math.pow(studentAvg - mean, 2)
                    })
                    
                    const variance = squaredDifferences.reduce((sum, diff) => sum + diff, 0) / students.value.length
                    return Math.sqrt(variance)
                })

                // æ’å
                const rankedStudents = computed(() => {
                    return [...students.value].sort((a, b) => {
                        const avgA = (a.math + a.chinese + a.english) / 3
                        const avgB = (b.math + b.chinese + b.english) / 3
                        return avgB - avgA
                    })
                })

                // ç¬¬ä¸€å
                const topStudent = computed(() => {
                    return rankedStudents.value[0] || null
                })

                // æ–¹æ³•
                const addStudent = () => {
                    if (!newStudent.value.name.trim()) {
                        alert('è¯·è¾“å…¥å­¦ç”Ÿå§“å')
                        return
                    }
                    
                    if (newStudent.value.math < 0 || newStudent.value.math > 100 ||
                        newStudent.value.chinese < 0 || newStudent.value.chinese > 100 ||
                        newStudent.value.english < 0 || newStudent.value.english > 100) {
                        alert('æˆç»©å¿…é¡»åœ¨0-100ä¹‹é—´')
                        return
                    }
                    
                    students.value.push({
                        name: newStudent.value.name,
                        math: newStudent.value.math,
                        chinese: newStudent.value.chinese,
                        english: newStudent.value.english
                    })
                    
                    // é‡ç½®è¡¨å•
                    newStudent.value = {
                        name: '',
                        math: 0,
                        chinese: 0,
                        english: 0
                    }
                }

                const getStudentAverage = (student) => {
                    return (student.math + student.chinese + student.english) / 3
                }

                const getGradeText = (average) => {
                    if (average >= 90) return 'ä¼˜ç§€'
                    if (average >= 80) return 'è‰¯å¥½'
                    if (average >= 70) return 'ä¸­ç­‰'
                    if (average >= 60) return 'åŠæ ¼'
                    return 'ä¸åŠæ ¼'
                }

                const getGradeClass = (average) => {
                    if (average >= 90) return 'grade-excellent'
                    if (average >= 70) return 'grade-good'
                    return 'grade-poor'
                }

                return {
                    students,
                    newStudent,
                    totalStudents,
                    classAverage,
                    passRate,
                    excellentRate,
                    highestScore,
                    lowestScore,
                    mathAverage,
                    chineseAverage,
                    englishAverage,
                    bestSubject,
                    standardDeviation,
                    rankedStudents,
                    topStudent,
                    addStudent,
                    getStudentAverage,
                    getGradeText,
                    getGradeClass
                }
            }
        }).mount('#app')
    </script>
</body>
</html>