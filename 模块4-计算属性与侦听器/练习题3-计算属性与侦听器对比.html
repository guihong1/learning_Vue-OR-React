<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç»ƒä¹ é¢˜3ï¼šè®¡ç®—å±æ€§ä¸ä¾¦å¬å™¨å¯¹æ¯” - Vue3</title>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #74b9ff 0%, #0984e3 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #74b9ff 0%, #0984e3 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.2em;
            margin-bottom: 10px;
        }

        .content {
            padding: 30px;
        }

        .comparison-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 30px;
        }

        .comparison-card {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 25px;
            border-left: 5px solid #74b9ff;
        }

        .comparison-card.watch {
            border-left-color: #e17055;
        }

        .comparison-card.method {
            border-left-color: #00b894;
        }

        .card-title {
            font-size: 1.4em;
            color: #2d3436;
            margin-bottom: 15px;
            font-weight: bold;
            display: flex;
            align-items: center;
        }

        .card-title .icon {
            margin-right: 10px;
            font-size: 1.2em;
        }

        .exercise {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 25px;
            margin-bottom: 30px;
            border-left: 5px solid #74b9ff;
        }

        .exercise-title {
            font-size: 1.4em;
            color: #2d3436;
            margin-bottom: 15px;
            font-weight: bold;
        }

        .exercise-description {
            color: #636e72;
            margin-bottom: 20px;
            line-height: 1.6;
        }

        .demo-container {
            background: white;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
            border: 1px solid #e9ecef;
        }

        .input-group {
            margin-bottom: 15px;
        }

        .input-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
            color: #2d3436;
        }

        .input-group input {
            width: 100%;
            padding: 10px;
            border: 2px solid #ddd;
            border-radius: 5px;
            font-size: 16px;
            transition: border-color 0.3s ease;
        }

        .input-group input:focus {
            outline: none;
            border-color: #74b9ff;
        }

        .result-display {
            background: #e8f4fd;
            border: 1px solid #74b9ff;
            border-radius: 5px;
            padding: 15px;
            margin: 10px 0;
        }

        .result-display h4 {
            color: #0984e3;
            margin-bottom: 10px;
        }

        .result-item {
            margin: 5px 0;
            color: #2d3436;
        }

        .performance-counter {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            border-radius: 5px;
            padding: 10px;
            margin: 10px 0;
            font-size: 14px;
            color: #856404;
        }

        .btn {
            background: #74b9ff;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            transition: background 0.3s ease;
            margin: 5px;
        }

        .btn:hover {
            background: #0984e3;
        }

        .btn.danger {
            background: #e17055;
        }

        .btn.danger:hover {
            background: #d63031;
        }

        .btn.success {
            background: #00b894;
        }

        .btn.success:hover {
            background: #00a085;
        }

        .data-table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
        }

        .data-table th,
        .data-table td {
            border: 1px solid #ddd;
            padding: 12px;
            text-align: left;
        }

        .data-table th {
            background: #74b9ff;
            color: white;
            font-weight: bold;
        }

        .data-table tr:nth-child(even) {
            background: #f8f9fa;
        }

        .data-table tr:hover {
            background: #e8f4fd;
        }

        .filter-controls {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .filter-controls select {
            padding: 8px 12px;
            border: 2px solid #ddd;
            border-radius: 5px;
            font-size: 14px;
        }

        .filter-controls select:focus {
            outline: none;
            border-color: #74b9ff;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .stat-card {
            background: white;
            border-radius: 8px;
            padding: 20px;
            text-align: center;
            border: 1px solid #e9ecef;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .stat-value {
            font-size: 2em;
            font-weight: bold;
            color: #74b9ff;
            margin-bottom: 5px;
        }

        .stat-label {
            color: #636e72;
            font-size: 14px;
        }

        .tips {
            background: #e8f4fd;
            border: 1px solid #74b9ff;
            border-radius: 8px;
            padding: 15px;
            margin-top: 20px;
        }

        .tips h4 {
            color: #0984e3;
            margin-bottom: 10px;
        }

        .tips ul {
            color: #636e72;
            padding-left: 20px;
        }

        .tips li {
            margin-bottom: 5px;
        }

        .code-example {
            background: #2d3436;
            color: #ddd;
            padding: 15px;
            border-radius: 5px;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            margin: 10px 0;
            overflow-x: auto;
        }

        .highlight {
            background: #fff3cd;
            padding: 2px 4px;
            border-radius: 3px;
            color: #856404;
            font-weight: bold;
        }

        @media (max-width: 768px) {
            .comparison-grid {
                grid-template-columns: 1fr;
            }
            
            .filter-controls {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <div id="app">
        <div class="container">
            <div class="header">
                <h1>âš–ï¸ ç»ƒä¹ é¢˜3ï¼šè®¡ç®—å±æ€§ä¸ä¾¦å¬å™¨å¯¹æ¯”</h1>
                <p>æ·±å…¥ç†è§£ä¸‰è€…çš„åŒºåˆ«ä¸æœ€ä½³ä½¿ç”¨åœºæ™¯</p>
            </div>

            <div class="content">
                <!-- å¯¹æ¯”è¯´æ˜ -->
                <div class="comparison-grid">
                    <div class="comparison-card">
                        <h3 class="card-title">
                            <span class="icon">ğŸ§®</span>
                            è®¡ç®—å±æ€§ (Computed)
                        </h3>
                        <ul>
                            <li><strong>ç¼“å­˜æœºåˆ¶ï¼š</strong>åŸºäºä¾èµ–ç¼“å­˜ï¼Œä¾èµ–ä¸å˜æ—¶ä¸é‡æ–°è®¡ç®—</li>
                            <li><strong>ä½¿ç”¨åœºæ™¯ï¼š</strong>å¤æ‚é€»è¾‘è®¡ç®—ã€æ•°æ®è½¬æ¢ã€è¿‡æ»¤æ’åº</li>
                            <li><strong>æ€§èƒ½ï¼š</strong>é«˜æ•ˆï¼Œé¿å…é‡å¤è®¡ç®—</li>
                            <li><strong>è¿”å›å€¼ï¼š</strong>å¿…é¡»æœ‰è¿”å›å€¼</li>
                        </ul>
                    </div>

                    <div class="comparison-card watch">
                        <h3 class="card-title">
                            <span class="icon">ğŸ‘€</span>
                            ä¾¦å¬å™¨ (Watch)
                        </h3>
                        <ul>
                            <li><strong>å“åº”æœºåˆ¶ï¼š</strong>æ•°æ®å˜åŒ–æ—¶æ‰§è¡Œå›è°ƒå‡½æ•°</li>
                            <li><strong>ä½¿ç”¨åœºæ™¯ï¼š</strong>å¼‚æ­¥æ“ä½œã€å‰¯ä½œç”¨ã€å¤æ‚ä¸šåŠ¡é€»è¾‘</li>
                            <li><strong>æ€§èƒ½ï¼š</strong>æ¯æ¬¡å˜åŒ–éƒ½æ‰§è¡Œ</li>
                            <li><strong>è¿”å›å€¼ï¼š</strong>æ— éœ€è¿”å›å€¼</li>
                        </ul>
                    </div>

                    <div class="comparison-card method">
                        <h3 class="card-title">
                            <span class="icon">âš¡</span>
                            æ–¹æ³• (Methods)
                        </h3>
                        <ul>
                            <li><strong>æ‰§è¡Œæœºåˆ¶ï¼š</strong>æ¯æ¬¡è°ƒç”¨éƒ½æ‰§è¡Œ</li>
                            <li><strong>ä½¿ç”¨åœºæ™¯ï¼š</strong>äº‹ä»¶å¤„ç†ã€ç”¨æˆ·äº¤äº’ã€ä¸€æ¬¡æ€§æ“ä½œ</li>
                            <li><strong>æ€§èƒ½ï¼š</strong>æ— ç¼“å­˜ï¼Œæ¯æ¬¡éƒ½é‡æ–°æ‰§è¡Œ</li>
                            <li><strong>è¿”å›å€¼ï¼š</strong>å¯é€‰</li>
                        </ul>
                    </div>
                </div>

                <!-- ç»ƒä¹ 1ï¼šæ€§èƒ½å¯¹æ¯”æ¼”ç¤º -->
                <div class="exercise">
                    <h2 class="exercise-title">ğŸš€ ç»ƒä¹ 1ï¼šæ€§èƒ½å¯¹æ¯”æ¼”ç¤º</h2>
                    <p class="exercise-description">
                        é€šè¿‡å®é™…ä¾‹å­å¯¹æ¯”è®¡ç®—å±æ€§ã€ä¾¦å¬å™¨å’Œæ–¹æ³•çš„æ€§èƒ½å·®å¼‚ã€‚
                    </p>

                    <div class="demo-container">
                        <div class="input-group">
                            <label>è¾“å…¥æ•°å­— (ç”¨äºè®¡ç®—å¹³æ–¹):</label>
                            <input type="number" v-model.number="numberInput" placeholder="è¯·è¾“å…¥æ•°å­—">
                        </div>

                        <div class="result-display">
                            <h4>ğŸ“Š è®¡ç®—ç»“æœå¯¹æ¯”</h4>
                            <div class="result-item">
                                <strong>è®¡ç®—å±æ€§ç»“æœ:</strong> {{ computedSquare }}
                                <span class="highlight">è°ƒç”¨æ¬¡æ•°: {{ computedCallCount }}</span>
                            </div>
                            <div class="result-item">
                                <strong>æ–¹æ³•ç»“æœ:</strong> {{ methodSquare() }}
                                <span class="highlight">è°ƒç”¨æ¬¡æ•°: {{ methodCallCount }}</span>
                            </div>
                            <div class="result-item">
                                <strong>ä¾¦å¬å™¨ç»“æœ:</strong> {{ watchedSquare }}
                                <span class="highlight">æ‰§è¡Œæ¬¡æ•°: {{ watchCallCount }}</span>
                            </div>
                        </div>

                        <div class="performance-counter">
                            <strong>æ€§èƒ½æç¤º:</strong> è®¡ç®—å±æ€§æœ‰ç¼“å­˜æœºåˆ¶ï¼Œåªåœ¨ä¾èµ–å˜åŒ–æ—¶é‡æ–°è®¡ç®—ã€‚
                            æ–¹æ³•æ¯æ¬¡è°ƒç”¨éƒ½ä¼šæ‰§è¡Œã€‚ä¾¦å¬å™¨åœ¨æ•°æ®å˜åŒ–æ—¶æ‰§è¡Œã€‚
                        </div>

                        <button class="btn" @click="triggerRerender">è§¦å‘é‡æ–°æ¸²æŸ“</button>
                        <button class="btn danger" @click="resetCounters">é‡ç½®è®¡æ•°å™¨</button>
                    </div>
                </div>

                <!-- ç»ƒä¹ 2ï¼šæ•°æ®è¿‡æ»¤ä¸æœç´¢ -->
                <div class="exercise">
                    <h2 class="exercise-title">ğŸ” ç»ƒä¹ 2ï¼šæ•°æ®è¿‡æ»¤ä¸æœç´¢ç³»ç»Ÿ</h2>
                    <p class="exercise-description">
                        ä½¿ç”¨è®¡ç®—å±æ€§å®ç°é«˜æ•ˆçš„æ•°æ®è¿‡æ»¤ï¼Œä½¿ç”¨ä¾¦å¬å™¨å¤„ç†æœç´¢å†å²ã€‚
                    </p>

                    <div class="demo-container">
                        <div class="filter-controls">
                            <input 
                                type="text" 
                                v-model="searchKeyword" 
                                placeholder="æœç´¢å•†å“åç§°..."
                                style="flex: 1; min-width: 200px;"
                            >
                            <select v-model="selectedCategory">
                                <option value="">æ‰€æœ‰åˆ†ç±»</option>
                                <option value="ç”µå­äº§å“">ç”µå­äº§å“</option>
                                <option value="æœè£…">æœè£…</option>
                                <option value="å›¾ä¹¦">å›¾ä¹¦</option>
                                <option value="é£Ÿå“">é£Ÿå“</option>
                            </select>
                            <select v-model="priceRange">
                                <option value="">æ‰€æœ‰ä»·æ ¼</option>
                                <option value="0-100">0-100å…ƒ</option>
                                <option value="100-500">100-500å…ƒ</option>
                                <option value="500-1000">500-1000å…ƒ</option>
                                <option value="1000+">1000å…ƒä»¥ä¸Š</option>
                            </select>
                            <select v-model="sortBy">
                                <option value="name">æŒ‰åç§°æ’åº</option>
                                <option value="price-asc">ä»·æ ¼ä»ä½åˆ°é«˜</option>
                                <option value="price-desc">ä»·æ ¼ä»é«˜åˆ°ä½</option>
                                <option value="rating">æŒ‰è¯„åˆ†æ’åº</option>
                            </select>
                        </div>

                        <div class="stats-grid">
                            <div class="stat-card">
                                <div class="stat-value">{{ filteredProducts.length }}</div>
                                <div class="stat-label">æœç´¢ç»“æœ</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-value">{{ averagePrice }}</div>
                                <div class="stat-label">å¹³å‡ä»·æ ¼</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-value">{{ highRatingCount }}</div>
                                <div class="stat-label">é«˜è¯„åˆ†å•†å“</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-value">{{ searchHistory.length }}</div>
                                <div class="stat-label">æœç´¢å†å²</div>
                            </div>
                        </div>

                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>å•†å“åç§°</th>
                                    <th>åˆ†ç±»</th>
                                    <th>ä»·æ ¼</th>
                                    <th>è¯„åˆ†</th>
                                    <th>åº“å­˜</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr v-for="product in paginatedProducts" :key="product.id">
                                    <td>{{ product.name }}</td>
                                    <td>{{ product.category }}</td>
                                    <td>Â¥{{ product.price }}</td>
                                    <td>{{ product.rating }}â­</td>
                                    <td>{{ product.stock }}</td>
                                </tr>
                                <tr v-if="filteredProducts.length === 0">
                                    <td colspan="5" style="text-align: center; color: #636e72;">
                                        æ²¡æœ‰æ‰¾åˆ°ç¬¦åˆæ¡ä»¶çš„å•†å“
                                    </td>
                                </tr>
                            </tbody>
                        </table>

                        <div style="text-align: center; margin-top: 20px;">
                            <button 
                                class="btn" 
                                @click="currentPage--" 
                                :disabled="currentPage <= 1"
                            >
                                ä¸Šä¸€é¡µ
                            </button>
                            <span style="margin: 0 15px;">ç¬¬ {{ currentPage }} é¡µï¼Œå…± {{ totalPages }} é¡µ</span>
                            <button 
                                class="btn" 
                                @click="currentPage++" 
                                :disabled="currentPage >= totalPages"
                            >
                                ä¸‹ä¸€é¡µ
                            </button>
                        </div>

                        <div class="result-display" v-if="searchHistory.length > 0">
                            <h4>ğŸ•’ æœç´¢å†å²</h4>
                            <div style="display: flex; flex-wrap: wrap; gap: 10px;">
                                <span 
                                    v-for="(term, index) in searchHistory.slice(0, 10)" 
                                    :key="index"
                                    style="background: #74b9ff; color: white; padding: 5px 10px; border-radius: 15px; font-size: 12px; cursor: pointer;"
                                    @click="searchKeyword = term"
                                >
                                    {{ term }}
                                </span>
                            </div>
                            <button class="btn danger" @click="clearSearchHistory" style="margin-top: 10px;">
                                æ¸…ç©ºå†å²
                            </button>
                        </div>
                    </div>
                </div>

                <!-- ç»ƒä¹ 3ï¼šå¼‚æ­¥æ•°æ®å¤„ç† -->
                <div class="exercise">
                    <h2 class="exercise-title">ğŸŒ ç»ƒä¹ 3ï¼šå¼‚æ­¥æ•°æ®å¤„ç†</h2>
                    <p class="exercise-description">
                        ä½¿ç”¨ä¾¦å¬å™¨å¤„ç†å¼‚æ­¥æ“ä½œï¼Œè®¡ç®—å±æ€§å¤„ç†æ•°æ®å±•ç¤ºã€‚
                    </p>

                    <div class="demo-container">
                        <div class="input-group">
                            <label>ç”¨æˆ·ID (1-10):</label>
                            <input type="number" v-model.number="userId" min="1" max="10" placeholder="è¾“å…¥ç”¨æˆ·ID">
                        </div>

                        <div class="result-display" v-if="userLoading">
                            <h4>â³ æ­£åœ¨åŠ è½½ç”¨æˆ·ä¿¡æ¯...</h4>
                        </div>

                        <div class="result-display" v-else-if="currentUser">
                            <h4>ğŸ‘¤ ç”¨æˆ·ä¿¡æ¯</h4>
                            <div class="result-item"><strong>å§“å:</strong> {{ currentUser.name }}</div>
                            <div class="result-item"><strong>é‚®ç®±:</strong> {{ currentUser.email }}</div>
                            <div class="result-item"><strong>å…¬å¸:</strong> {{ currentUser.company }}</div>
                            <div class="result-item"><strong>åœ°å€:</strong> {{ userFullAddress }}</div>
                            <div class="result-item"><strong>è´¦æˆ·çŠ¶æ€:</strong> {{ userAccountStatus }}</div>
                        </div>

                        <div class="result-display" v-if="userError">
                            <h4 style="color: #e17055;">âŒ åŠ è½½å¤±è´¥</h4>
                            <div>{{ userError }}</div>
                        </div>

                        <div class="code-example">
<!-- // ä¾¦å¬å™¨å¤„ç†å¼‚æ­¥æ“ä½œ -->
watch(userId, async (newId) => {
  if (newId && newId >= 1 && newId <= 10) {
    userLoading.value = true
    userError.value = ''
    try {
      // æ¨¡æ‹ŸAPIè°ƒç”¨
      const response = await fetchUser(newId)
      currentUser.value = response
    } catch (error) {
      userError.value = error.message
    } finally {
      userLoading.value = false
    }
  }
})

// è®¡ç®—å±æ€§å¤„ç†æ•°æ®å±•ç¤º
const userFullAddress = computed(() => {
  if (!currentUser.value?.address) return ''
  const addr = currentUser.value.address
  return `${addr.city}, ${addr.street} ${addr.suite}`
})
                        </div>
                    </div>
                </div>

                <!-- å­¦ä¹ æç¤º -->
                <div class="tips">
                    <h4>ğŸ’¡ é€‰æ‹©æŒ‡å—</h4>
                    <ul>
                        <li><strong>ä½¿ç”¨è®¡ç®—å±æ€§å½“ï¼š</strong>
                            <ul>
                                <li>éœ€è¦åŸºäºç°æœ‰æ•°æ®è®¡ç®—æ–°å€¼</li>
                                <li>è®¡ç®—é€»è¾‘å¤æ‚ä¸”å¯èƒ½è¢«å¤šæ¬¡è°ƒç”¨</li>
                                <li>éœ€è¦ç¼“å­˜æœºåˆ¶æé«˜æ€§èƒ½</li>
                                <li>æ•°æ®è½¬æ¢ã€è¿‡æ»¤ã€æ’åºç­‰åœºæ™¯</li>
                            </ul>
                        </li>
                        <li><strong>ä½¿ç”¨ä¾¦å¬å™¨å½“ï¼š</strong>
                            <ul>
                                <li>éœ€è¦æ‰§è¡Œå¼‚æ­¥æ“ä½œ</li>
                                <li>éœ€è¦è®¿é—®DOMæˆ–æ‰§è¡Œå‰¯ä½œç”¨</li>
                                <li>æ•°æ®å˜åŒ–æ—¶éœ€è¦æ‰§è¡Œå¤æ‚çš„ä¸šåŠ¡é€»è¾‘</li>
                                <li>éœ€è¦ç›‘æ§å¤šä¸ªæ•°æ®æºçš„å˜åŒ–</li>
                            </ul>
                        </li>
                        <li><strong>ä½¿ç”¨æ–¹æ³•å½“ï¼š</strong>
                            <ul>
                                <li>å¤„ç†ç”¨æˆ·äº¤äº’äº‹ä»¶</li>
                                <li>æ‰§è¡Œä¸€æ¬¡æ€§æ“ä½œ</li>
                                <li>éœ€è¦ä¼ é€’å‚æ•°</li>
                                <li>ä¸éœ€è¦ç¼“å­˜çš„ç®€å•è®¡ç®—</li>
                            </ul>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <script>
        const { createApp, ref, computed, watch, onMounted } = Vue

        createApp({
            setup() {
                // æ€§èƒ½å¯¹æ¯”ç›¸å…³æ•°æ®
                const numberInput = ref(5)
                const computedCallCount = ref(0)
                const methodCallCount = ref(0)
                const watchCallCount = ref(0)
                const watchedSquare = ref(25)
                const rerenderTrigger = ref(0)

                // å•†å“æ•°æ®
                const searchKeyword = ref('')
                const selectedCategory = ref('')
                const priceRange = ref('')
                const sortBy = ref('name')
                const currentPage = ref(1)
                const pageSize = 5
                const searchHistory = ref([])

                // ç”¨æˆ·æ•°æ®
                const userId = ref(1)
                const currentUser = ref(null)
                const userLoading = ref(false)
                const userError = ref('')

                // æ¨¡æ‹Ÿå•†å“æ•°æ®
                const products = ref([
                    { id: 1, name: 'iPhone 15 Pro', category: 'ç”µå­äº§å“', price: 7999, rating: 4.8, stock: 50 },
                    { id: 2, name: 'MacBook Air M2', category: 'ç”µå­äº§å“', price: 8999, rating: 4.9, stock: 30 },
                    { id: 3, name: 'è¿è¡£è£™', category: 'æœè£…', price: 299, rating: 4.5, stock: 100 },
                    { id: 4, name: 'Vue.jsæƒå¨æŒ‡å—', category: 'å›¾ä¹¦', price: 89, rating: 4.7, stock: 200 },
                    { id: 5, name: 'æœ‰æœºè‹¹æœ', category: 'é£Ÿå“', price: 25, rating: 4.3, stock: 500 },
                    { id: 6, name: 'AirPods Pro', category: 'ç”µå­äº§å“', price: 1999, rating: 4.6, stock: 80 },
                    { id: 7, name: 'ç‰›ä»”è£¤', category: 'æœè£…', price: 199, rating: 4.4, stock: 150 },
                    { id: 8, name: 'JavaScripté«˜çº§ç¨‹åºè®¾è®¡', category: 'å›¾ä¹¦', price: 129, rating: 4.8, stock: 120 },
                    { id: 9, name: 'è¿›å£ç‰›è‚‰', category: 'é£Ÿå“', price: 168, rating: 4.6, stock: 80 },
                    { id: 10, name: 'iPad Pro', category: 'ç”µå­äº§å“', price: 6999, rating: 4.7, stock: 40 },
                    { id: 11, name: 'ç¾½ç»’æœ', category: 'æœè£…', price: 899, rating: 4.5, stock: 60 },
                    { id: 12, name: 'æ·±å…¥ç†è§£è®¡ç®—æœºç³»ç»Ÿ', category: 'å›¾ä¹¦', price: 139, rating: 4.9, stock: 90 }
                ])

                // è®¡ç®—å±æ€§ - æ€§èƒ½æ¼”ç¤º
                const computedSquare = computed(() => {
                    computedCallCount.value++
                    console.log('è®¡ç®—å±æ€§è¢«è°ƒç”¨:', computedCallCount.value)
                    return numberInput.value * numberInput.value
                })

                // æ–¹æ³• - æ€§èƒ½æ¼”ç¤º
                const methodSquare = () => {
                    methodCallCount.value++
                    console.log('æ–¹æ³•è¢«è°ƒç”¨:', methodCallCount.value)
                    return numberInput.value * numberInput.value
                }

                // è®¡ç®—å±æ€§ - æ•°æ®è¿‡æ»¤
                const filteredProducts = computed(() => {
                    let result = products.value

                    // å…³é”®è¯æœç´¢
                    if (searchKeyword.value) {
                        result = result.filter(product => 
                            product.name.toLowerCase().includes(searchKeyword.value.toLowerCase())
                        )
                    }

                    // åˆ†ç±»è¿‡æ»¤
                    if (selectedCategory.value) {
                        result = result.filter(product => product.category === selectedCategory.value)
                    }

                    // ä»·æ ¼èŒƒå›´è¿‡æ»¤
                    if (priceRange.value) {
                        const [min, max] = priceRange.value.split('-').map(v => v === '+' ? Infinity : parseInt(v))
                        result = result.filter(product => {
                            if (priceRange.value === '1000+') {
                                return product.price >= 1000
                            }
                            return product.price >= min && product.price <= max
                        })
                    }

                    // æ’åº
                    switch (sortBy.value) {
                        case 'price-asc':
                            result.sort((a, b) => a.price - b.price)
                            break
                        case 'price-desc':
                            result.sort((a, b) => b.price - a.price)
                            break
                        case 'rating':
                            result.sort((a, b) => b.rating - a.rating)
                            break
                        default:
                            result.sort((a, b) => a.name.localeCompare(b.name))
                    }

                    return result
                })

                // è®¡ç®—å±æ€§ - åˆ†é¡µ
                const totalPages = computed(() => {
                    return Math.ceil(filteredProducts.value.length / pageSize)
                })

                const paginatedProducts = computed(() => {
                    const start = (currentPage.value - 1) * pageSize
                    const end = start + pageSize
                    return filteredProducts.value.slice(start, end)
                })

                // è®¡ç®—å±æ€§ - ç»Ÿè®¡ä¿¡æ¯
                const averagePrice = computed(() => {
                    if (filteredProducts.value.length === 0) return '0'
                    const total = filteredProducts.value.reduce((sum, product) => sum + product.price, 0)
                    return `Â¥${Math.round(total / filteredProducts.value.length)}`
                })

                const highRatingCount = computed(() => {
                    return filteredProducts.value.filter(product => product.rating >= 4.5).length
                })

                // è®¡ç®—å±æ€§ - ç”¨æˆ·ä¿¡æ¯
                const userFullAddress = computed(() => {
                    if (!currentUser.value?.address) return ''
                    const addr = currentUser.value.address
                    return `${addr.city}, ${addr.street} ${addr.suite}`
                })

                const userAccountStatus = computed(() => {
                    if (!currentUser.value) return ''
                    const user = currentUser.value
                    if (user.email && user.phone) {
                        return 'âœ… å·²éªŒè¯'
                    } else {
                        return 'âš ï¸ å¾…éªŒè¯'
                    }
                })

                // ä¾¦å¬å™¨ - æ€§èƒ½æ¼”ç¤º
                watch(numberInput, (newValue) => {
                    watchCallCount.value++
                    watchedSquare.value = newValue * newValue
                    console.log('ä¾¦å¬å™¨è¢«æ‰§è¡Œ:', watchCallCount.value)
                })

                // ä¾¦å¬å™¨ - æœç´¢å†å²
                watch(searchKeyword, (newKeyword, oldKeyword) => {
                    if (newKeyword && newKeyword.trim() && newKeyword !== oldKeyword) {
                        // æ·»åŠ åˆ°æœç´¢å†å²
                        if (!searchHistory.value.includes(newKeyword.trim())) {
                            searchHistory.value.unshift(newKeyword.trim())
                            // åªä¿ç•™æœ€è¿‘20ä¸ªæœç´¢è®°å½•
                            if (searchHistory.value.length > 20) {
                                searchHistory.value = searchHistory.value.slice(0, 20)
                            }
                        }
                    }
                    // é‡ç½®é¡µç 
                    currentPage.value = 1
                })

                // ä¾¦å¬å™¨ - è¿‡æ»¤æ¡ä»¶å˜åŒ–
                watch([selectedCategory, priceRange, sortBy], () => {
                    currentPage.value = 1
                })

                // ä¾¦å¬å™¨ - å¼‚æ­¥ç”¨æˆ·æ•°æ®
                watch(userId, async (newId) => {
                    if (newId && newId >= 1 && newId <= 10) {
                        userLoading.value = true
                        userError.value = ''
                        currentUser.value = null
                        
                        try {
                            // æ¨¡æ‹ŸAPIè°ƒç”¨å»¶è¿Ÿ
                            await new Promise(resolve => setTimeout(resolve, 1000))
                            
                            const userData = await fetchUser(newId)
                            currentUser.value = userData
                        } catch (error) {
                            userError.value = error.message
                        } finally {
                            userLoading.value = false
                        }
                    } else {
                        currentUser.value = null
                        userError.value = ''
                    }
                }, { immediate: true })

                // æ–¹æ³•
                const triggerRerender = () => {
                    rerenderTrigger.value++
                    console.log('è§¦å‘é‡æ–°æ¸²æŸ“')
                }

                const resetCounters = () => {
                    computedCallCount.value = 0
                    methodCallCount.value = 0
                    watchCallCount.value = 0
                }

                const clearSearchHistory = () => {
                    searchHistory.value = []
                }

                // æ¨¡æ‹Ÿç”¨æˆ·API
                const fetchUser = async (id) => {
                    const users = [
                        { id: 1, name: 'å¼ ä¸‰', email: 'zhangsan@example.com', phone: '13800138001', company: 'é˜¿é‡Œå·´å·´', address: { city: 'æ­å·', street: 'æ–‡ä¸‰è·¯', suite: '969å·' } },
                        { id: 2, name: 'æå››', email: 'lisi@example.com', phone: '13800138002', company: 'è…¾è®¯', address: { city: 'æ·±åœ³', street: 'ç§‘æŠ€å›­', suite: 'å¤§å¦Aåº§' } },
                        { id: 3, name: 'ç‹äº”', email: 'wangwu@example.com', phone: '', company: 'ç™¾åº¦', address: { city: 'åŒ—äº¬', street: 'ä¸­å…³æ‘', suite: 'ç§‘æŠ€å¤§å¦' } },
                        { id: 4, name: 'èµµå…­', email: 'zhaoliu@example.com', phone: '13800138004', company: 'å­—èŠ‚è·³åŠ¨', address: { city: 'åŒ—äº¬', street: 'æœ›äº¬', suite: 'SOHO' } },
                        { id: 5, name: 'é’±ä¸ƒ', email: '', phone: '13800138005', company: 'ç¾å›¢', address: { city: 'åŒ—äº¬', street: 'æœé˜³åŒº', suite: 'æ€»éƒ¨å¤§æ¥¼' } },
                        { id: 6, name: 'å­™å…«', email: 'sunba@example.com', phone: '13800138006', company: 'æ»´æ»´', address: { city: 'åŒ—äº¬', street: 'æµ·æ·€åŒº', suite: 'åˆ›ä¸šå¤§å¦' } },
                        { id: 7, name: 'å‘¨ä¹', email: 'zhoujiu@example.com', phone: '', company: 'å°ç±³', address: { city: 'åŒ—äº¬', street: 'äº¦åº„', suite: 'ç§‘æŠ€å›­' } },
                        { id: 8, name: 'å´å', email: 'wushi@example.com', phone: '13800138008', company: 'åä¸º', address: { city: 'æ·±åœ³', street: 'å‚ç”°', suite: 'æ€»éƒ¨åŸºåœ°' } },
                        { id: 9, name: 'éƒ‘ä¸€', email: 'zhengyi@example.com', phone: '13800138009', company: 'ç½‘æ˜“', address: { city: 'æ­å·', street: 'æ»¨æ±ŸåŒº', suite: 'ç½‘æ˜“å¤§å¦' } },
                        { id: 10, name: 'é™ˆäºŒ', email: 'chener@example.com', phone: '13800138010', company: 'äº¬ä¸œ', address: { city: 'åŒ—äº¬', street: 'å¤§å…´åŒº', suite: 'æ€»éƒ¨å›­åŒº' } }
                    ]

                    const user = users.find(u => u.id === id)
                    if (!user) {
                        throw new Error('ç”¨æˆ·ä¸å­˜åœ¨')
                    }

                    // æ¨¡æ‹Ÿç½‘ç»œé”™è¯¯
                    if (Math.random() < 0.1) {
                        throw new Error('ç½‘ç»œè¿æ¥å¤±è´¥')
                    }

                    return user
                }

                return {
                    // æ€§èƒ½å¯¹æ¯”
                    numberInput,
                    computedSquare,
                    methodSquare,
                    watchedSquare,
                    computedCallCount,
                    methodCallCount,
                    watchCallCount,
                    triggerRerender,
                    resetCounters,
                    
                    // æ•°æ®è¿‡æ»¤
                    searchKeyword,
                    selectedCategory,
                    priceRange,
                    sortBy,
                    currentPage,
                    filteredProducts,
                    paginatedProducts,
                    totalPages,
                    averagePrice,
                    highRatingCount,
                    searchHistory,
                    clearSearchHistory,
                    
                    // ç”¨æˆ·æ•°æ®
                    userId,
                    currentUser,
                    userLoading,
                    userError,
                    userFullAddress,
                    userAccountStatus
                }
            }
        }).mount('#app')
    </script>
</body>
</html>