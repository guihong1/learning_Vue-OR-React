<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç»ƒä¹ é¢˜4ï¼šé«˜çº§ç”¨æ³•ä¸å®é™…åº”ç”¨ - Vue3</title>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #fd79a8 0%, #e84393 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #fd79a8 0%, #e84393 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.2em;
            margin-bottom: 10px;
        }

        .content {
            padding: 30px;
        }

        .exercise {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 25px;
            margin-bottom: 30px;
            border-left: 5px solid #fd79a8;
        }

        .exercise-title {
            font-size: 1.4em;
            color: #2d3436;
            margin-bottom: 15px;
            font-weight: bold;
        }

        .exercise-description {
            color: #636e72;
            margin-bottom: 20px;
            line-height: 1.6;
        }

        .demo-container {
            background: white;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
            border: 1px solid #e9ecef;
        }

        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }

        .form-group {
            margin-bottom: 15px;
        }

        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
            color: #2d3436;
        }

        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 10px;
            border: 2px solid #ddd;
            border-radius: 5px;
            font-size: 16px;
            transition: border-color 0.3s ease;
        }

        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: #fd79a8;
        }

        .checkbox-group {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            margin-top: 10px;
        }

        .checkbox-item {
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .checkbox-item input[type="checkbox"] {
            width: auto;
        }

        .result-display {
            background: #e8f4fd;
            border: 1px solid #fd79a8;
            border-radius: 5px;
            padding: 15px;
            margin: 10px 0;
        }

        .result-display h4 {
            color: #e84393;
            margin-bottom: 10px;
        }

        .result-item {
            margin: 5px 0;
            color: #2d3436;
        }

        .btn {
            background: #fd79a8;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            transition: background 0.3s ease;
            margin: 5px;
        }

        .btn:hover {
            background: #e84393;
        }

        .btn:disabled {
            background: #ddd;
            cursor: not-allowed;
        }

        .btn.danger {
            background: #e17055;
        }

        .btn.danger:hover {
            background: #d63031;
        }

        .btn.success {
            background: #00b894;
        }

        .btn.success:hover {
            background: #00a085;
        }

        .progress-bar {
            width: 100%;
            height: 20px;
            background: #e9ecef;
            border-radius: 10px;
            overflow: hidden;
            margin: 10px 0;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #fd79a8, #e84393);
            transition: width 0.3s ease;
            border-radius: 10px;
        }

        .chart-container {
            background: white;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
            border: 1px solid #e9ecef;
        }

        .chart-bar {
            display: flex;
            align-items: center;
            margin: 10px 0;
        }

        .chart-label {
            width: 100px;
            font-size: 14px;
            color: #636e72;
        }

        .chart-bar-fill {
            height: 20px;
            background: linear-gradient(90deg, #fd79a8, #e84393);
            border-radius: 10px;
            margin: 0 10px;
            transition: width 0.3s ease;
        }

        .chart-value {
            font-size: 14px;
            font-weight: bold;
            color: #2d3436;
        }

        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 15px 20px;
            border-radius: 5px;
            color: white;
            font-weight: bold;
            z-index: 1000;
            transition: all 0.3s ease;
            transform: translateX(100%);
        }

        .notification.show {
            transform: translateX(0);
        }

        .notification.success {
            background: #00b894;
        }

        .notification.error {
            background: #e17055;
        }

        .notification.warning {
            background: #fdcb6e;
            color: #2d3436;
        }

        .data-table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
        }

        .data-table th,
        .data-table td {
            border: 1px solid #ddd;
            padding: 12px;
            text-align: left;
        }

        .data-table th {
            background: #fd79a8;
            color: white;
            font-weight: bold;
        }

        .data-table tr:nth-child(even) {
            background: #f8f9fa;
        }

        .data-table tr:hover {
            background: #e8f4fd;
        }

        .tabs {
            display: flex;
            border-bottom: 2px solid #e9ecef;
            margin-bottom: 20px;
        }

        .tab {
            padding: 10px 20px;
            cursor: pointer;
            border-bottom: 2px solid transparent;
            transition: all 0.3s ease;
        }

        .tab.active {
            border-bottom-color: #fd79a8;
            color: #e84393;
            font-weight: bold;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .code-example {
            background: #2d3436;
            color: #ddd;
            padding: 15px;
            border-radius: 5px;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            margin: 10px 0;
            overflow-x: auto;
        }

        .highlight {
            background: #fff3cd;
            padding: 2px 4px;
            border-radius: 3px;
            color: #856404;
            font-weight: bold;
        }

        .tips {
            background: #e8f4fd;
            border: 1px solid #fd79a8;
            border-radius: 8px;
            padding: 15px;
            margin-top: 20px;
        }

        .tips h4 {
            color: #e84393;
            margin-bottom: 10px;
        }

        .tips ul {
            color: #636e72;
            padding-left: 20px;
        }

        .tips li {
            margin-bottom: 5px;
        }

        @media (max-width: 768px) {
            .form-grid {
                grid-template-columns: 1fr;
            }
            
            .tabs {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <div id="app">
        <div class="container">
            <div class="header">
                <h1>ğŸš€ ç»ƒä¹ é¢˜4ï¼šé«˜çº§ç”¨æ³•ä¸å®é™…åº”ç”¨</h1>
                <p>watchEffectã€åœæ­¢ä¾¦å¬å™¨ã€getter/setter - æŒæ¡é«˜çº§ç‰¹æ€§</p>
            </div>

            <div class="content">
                <!-- ç»ƒä¹ 1ï¼šwatchEffect è‡ªåŠ¨ä¾èµ–è¿½è¸ª -->
                <div class="exercise">
                    <h2 class="exercise-title">âš¡ ç»ƒä¹ 1ï¼šwatchEffect è‡ªåŠ¨ä¾èµ–è¿½è¸ª</h2>
                    <p class="exercise-description">
                        ä½¿ç”¨ watchEffect å®ç°è‡ªåŠ¨ä¾èµ–è¿½è¸ªï¼Œæ— éœ€æ‰‹åŠ¨æŒ‡å®šç›‘å¬çš„æ•°æ®æºã€‚
                    </p>

                    <div class="demo-container">
                        <div class="form-grid">
                            <div>
                                <div class="form-group">
                                    <label>ç”¨æˆ·å:</label>
                                    <input type="text" v-model="userSettings.username" placeholder="è¾“å…¥ç”¨æˆ·å">
                                </div>
                                <div class="form-group">
                                    <label>ä¸»é¢˜:</label>
                                    <select v-model="userSettings.theme">
                                        <option value="light">æµ…è‰²ä¸»é¢˜</option>
                                        <option value="dark">æ·±è‰²ä¸»é¢˜</option>
                                        <option value="auto">è‡ªåŠ¨</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label>è¯­è¨€:</label>
                                    <select v-model="userSettings.language">
                                        <option value="zh">ä¸­æ–‡</option>
                                        <option value="en">English</option>
                                        <option value="ja">æ—¥æœ¬èª</option>
                                    </select>
                                </div>
                            </div>
                            <div>
                                <div class="form-group">
                                    <label>é€šçŸ¥è®¾ç½®:</label>
                                    <div class="checkbox-group">
                                        <div class="checkbox-item">
                                            <input type="checkbox" v-model="userSettings.notifications.email" id="email">
                                            <label for="email">é‚®ä»¶é€šçŸ¥</label>
                                        </div>
                                        <div class="checkbox-item">
                                            <input type="checkbox" v-model="userSettings.notifications.push" id="push">
                                            <label for="push">æ¨é€é€šçŸ¥</label>
                                        </div>
                                        <div class="checkbox-item">
                                            <input type="checkbox" v-model="userSettings.notifications.sms" id="sms">
                                            <label for="sms">çŸ­ä¿¡é€šçŸ¥</label>
                                        </div>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label>è‡ªåŠ¨ä¿å­˜é—´éš” (ç§’):</label>
                                    <input type="range" v-model.number="userSettings.autoSaveInterval" min="5" max="60" step="5">
                                    <span>{{ userSettings.autoSaveInterval }}ç§’</span>
                                </div>
                            </div>
                        </div>

                        <div class="result-display">
                            <h4>ğŸ“Š è‡ªåŠ¨è¿½è¸ªçŠ¶æ€</h4>
                            <div class="result-item"><strong>é…ç½®æ›´æ–°æ¬¡æ•°:</strong> {{ settingsUpdateCount }}</div>
                            <div class="result-item"><strong>æœ€åä¿å­˜æ—¶é—´:</strong> {{ lastSaveTime }}</div>
                            <div class="result-item"><strong>é…ç½®å“ˆå¸Œ:</strong> {{ settingsHash }}</div>
                            <div class="result-item"><strong>å¯ç”¨çš„é€šçŸ¥:</strong> {{ enabledNotifications.join(', ') || 'æ— ' }}</div>
                        </div>

                        <div class="code-example">
// watchEffect è‡ªåŠ¨è¿½è¸ªæ‰€æœ‰å“åº”å¼ä¾èµ–
watchEffect(() => {
  // è‡ªåŠ¨è¿½è¸ª userSettings çš„æ‰€æœ‰å˜åŒ–
  const hash = generateHash(userSettings.value)
  settingsHash.value = hash
  settingsUpdateCount.value++
  
  // è‡ªåŠ¨ä¿å­˜åˆ° localStorage
  localStorage.setItem('userSettings', JSON.stringify(userSettings.value))
  lastSaveTime.value = new Date().toLocaleTimeString()
})
                        </div>
                    </div>
                </div>

                <!-- ç»ƒä¹ 2ï¼šè®¡ç®—å±æ€§çš„ getter å’Œ setter -->
                <div class="exercise">
                    <h2 class="exercise-title">ğŸ”„ ç»ƒä¹ 2ï¼šè®¡ç®—å±æ€§çš„ getter å’Œ setter</h2>
                    <p class="exercise-description">
                        å®ç°å¯è¯»å†™çš„è®¡ç®—å±æ€§ï¼Œå¤„ç†å¤æ‚çš„æ•°æ®è½¬æ¢é€»è¾‘ã€‚
                    </p>

                    <div class="demo-container">
                        <div class="form-grid">
                            <div>
                                <div class="form-group">
                                    <label>å…¨å (å¯ç›´æ¥ç¼–è¾‘):</label>
                                    <input type="text" v-model="fullName" placeholder="è¾“å…¥å…¨å">
                                </div>
                                <div class="form-group">
                                    <label>å§“:</label>
                                    <input type="text" v-model="firstName" placeholder="å§“">
                                </div>
                                <div class="form-group">
                                    <label>å:</label>
                                    <input type="text" v-model="lastName" placeholder="å">
                                </div>
                            </div>
                            <div>
                                <div class="form-group">
                                    <label>æ¸©åº¦ (æ‘„æ°åº¦):</label>
                                    <input type="number" v-model.number="celsius" placeholder="æ‘„æ°åº¦">
                                </div>
                                <div class="form-group">
                                    <label>æ¸©åº¦ (åæ°åº¦):</label>
                                    <input type="number" v-model.number="fahrenheit" placeholder="åæ°åº¦">
                                </div>
                                <div class="form-group">
                                    <label>ä»·æ ¼ (åˆ†):</label>
                                    <input type="number" v-model.number="priceInCents" placeholder="ä»·æ ¼(åˆ†)">
                                </div>
                                <div class="form-group">
                                    <label>ä»·æ ¼ (å…ƒ):</label>
                                    <input type="number" v-model.number="priceInYuan" step="0.01" placeholder="ä»·æ ¼(å…ƒ)">
                                </div>
                            </div>
                        </div>

                        <div class="result-display">
                            <h4>ğŸ”„ åŒå‘è½¬æ¢æ¼”ç¤º</h4>
                            <div class="result-item"><strong>å§“åè§£æ:</strong> å§“="{{ firstName }}" + å="{{ lastName }}" = "{{ fullName }}"</div>
                            <div class="result-item"><strong>æ¸©åº¦è½¬æ¢:</strong> {{ celsius }}Â°C = {{ fahrenheit }}Â°F</div>
                            <div class="result-item"><strong>ä»·æ ¼è½¬æ¢:</strong> {{ priceInCents }}åˆ† = {{ priceInYuan }}å…ƒ</div>
                        </div>

                        <div class="code-example">
// è®¡ç®—å±æ€§çš„ getter å’Œ setter
const fullName = computed({
  get() {
    return `${firstName.value} ${lastName.value}`.trim()
  },
  set(value) {
    const parts = value.split(' ')
    firstName.value = parts[0] || ''
    lastName.value = parts.slice(1).join(' ') || ''
  }
})

const fahrenheit = computed({
  get: () => celsius.value * 9/5 + 32,
  set: (value) => celsius.value = (value - 32) * 5/9
})
                        </div>
                    </div>
                </div>

                <!-- ç»ƒä¹ 3ï¼šä¾¦å¬å™¨çš„åœæ­¢å’Œæ¸…ç† -->
                <div class="exercise">
                    <h2 class="exercise-title">ğŸ›‘ ç»ƒä¹ 3ï¼šä¾¦å¬å™¨çš„åœæ­¢å’Œæ¸…ç†</h2>
                    <p class="exercise-description">
                        å­¦ä¹ å¦‚ä½•æ‰‹åŠ¨åœæ­¢ä¾¦å¬å™¨ï¼Œé¿å…å†…å­˜æ³„æ¼å’Œä¸å¿…è¦çš„è®¡ç®—ã€‚
                    </p>

                    <div class="demo-container">
                        <div class="tabs">
                            <div class="tab" :class="{ active: activeTab === 'timer' }" @click="activeTab = 'timer'">
                                å®šæ—¶å™¨ç®¡ç†
                            </div>
                            <div class="tab" :class="{ active: activeTab === 'api' }" @click="activeTab = 'api'">
                                API ç›‘æ§
                            </div>
                            <div class="tab" :class="{ active: activeTab === 'logs' }" @click="activeTab = 'logs'">
                                æ—¥å¿—è®°å½•
                            </div>
                        </div>

                        <div class="tab-content" :class="{ active: activeTab === 'timer' }">
                            <div class="form-group">
                                <label>è®¡æ•°å™¨é—´éš” (æ¯«ç§’):</label>
                                <input type="number" v-model.number="timerInterval" min="100" max="5000" step="100">
                            </div>
                            <div class="form-group">
                                <button class="btn" @click="startTimer" :disabled="timerRunning">å¯åŠ¨è®¡æ—¶å™¨</button>
                                <button class="btn danger" @click="stopTimer" :disabled="!timerRunning">åœæ­¢è®¡æ—¶å™¨</button>
                                <button class="btn" @click="resetTimer">é‡ç½®è®¡æ—¶å™¨</button>
                            </div>
                            <div class="result-display">
                                <h4>â±ï¸ è®¡æ—¶å™¨çŠ¶æ€</h4>
                                <div class="result-item"><strong>å½“å‰è®¡æ•°:</strong> {{ timerCount }}</div>
                                <div class="result-item"><strong>è¿è¡ŒçŠ¶æ€:</strong> {{ timerRunning ? 'è¿è¡Œä¸­' : 'å·²åœæ­¢' }}</div>
                                <div class="result-item"><strong>æ´»è·ƒä¾¦å¬å™¨:</strong> {{ activeWatchers.length }}</div>
                            </div>
                        </div>

                        <div class="tab-content" :class="{ active: activeTab === 'api' }">
                            <div class="form-group">
                                <label>API ç«¯ç‚¹:</label>
                                <select v-model="selectedEndpoint">
                                    <option value="">é€‰æ‹©ç«¯ç‚¹</option>
                                    <option value="users">ç”¨æˆ·åˆ—è¡¨</option>
                                    <option value="posts">æ–‡ç« åˆ—è¡¨</option>
                                    <option value="comments">è¯„è®ºåˆ—è¡¨</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <button class="btn" @click="startApiMonitoring" :disabled="apiMonitoring">å¼€å§‹ç›‘æ§</button>
                                <button class="btn danger" @click="stopApiMonitoring" :disabled="!apiMonitoring">åœæ­¢ç›‘æ§</button>
                            </div>
                            <div class="result-display">
                                <h4>ğŸŒ API ç›‘æ§çŠ¶æ€</h4>
                                <div class="result-item"><strong>ç›‘æ§çŠ¶æ€:</strong> {{ apiMonitoring ? 'ç›‘æ§ä¸­' : 'å·²åœæ­¢' }}</div>
                                <div class="result-item"><strong>è¯·æ±‚æ¬¡æ•°:</strong> {{ apiRequestCount }}</div>
                                <div class="result-item"><strong>æœ€åå“åº”:</strong> {{ lastApiResponse }}</div>
                            </div>
                        </div>

                        <div class="tab-content" :class="{ active: activeTab === 'logs' }">
                            <div class="form-group">
                                <button class="btn" @click="startLogging" :disabled="loggingActive">å¼€å§‹æ—¥å¿—è®°å½•</button>
                                <button class="btn danger" @click="stopLogging" :disabled="!loggingActive">åœæ­¢æ—¥å¿—è®°å½•</button>
                                <button class="btn" @click="clearLogs">æ¸…ç©ºæ—¥å¿—</button>
                            </div>
                            <div class="result-display">
                                <h4>ğŸ“ ç³»ç»Ÿæ—¥å¿—</h4>
                                <div style="max-height: 200px; overflow-y: auto; background: #f8f9fa; padding: 10px; border-radius: 5px;">
                                    <div v-for="log in systemLogs" :key="log.id" style="font-family: monospace; font-size: 12px; margin: 2px 0;">
                                        <span style="color: #636e72;">[{{ log.time }}]</span>
                                        <span :style="{ color: getLogColor(log.level) }">[{{ log.level }}]</span>
                                        {{ log.message }}
                                    </div>
                                    <div v-if="systemLogs.length === 0" style="text-align: center; color: #636e72;">
                                        æš‚æ— æ—¥å¿—è®°å½•
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="code-example">
// æ‰‹åŠ¨åœæ­¢ä¾¦å¬å™¨
const stopWatcher = watch(source, callback)

// åœ¨éœ€è¦æ—¶åœæ­¢
stopWatcher()

// watchEffect ä¹Ÿè¿”å›åœæ­¢å‡½æ•°
const stopEffect = watchEffect(() => {
  // å‰¯ä½œç”¨é€»è¾‘
})

// ç»„ä»¶å¸è½½æ—¶è‡ªåŠ¨æ¸…ç†
onUnmounted(() => {
  activeWatchers.value.forEach(stop => stop())
  activeWatchers.value = []
})
                        </div>
                    </div>
                </div>

                <!-- ç»ƒä¹ 4ï¼šå¤æ‚æ•°æ®æµç®¡ç† -->
                <div class="exercise">
                    <h2 class="exercise-title">ğŸŒŠ ç»ƒä¹ 4ï¼šå¤æ‚æ•°æ®æµç®¡ç†</h2>
                    <p class="exercise-description">
                        ç»¼åˆè¿ç”¨è®¡ç®—å±æ€§å’Œä¾¦å¬å™¨ç®¡ç†å¤æ‚çš„æ•°æ®æµå’ŒçŠ¶æ€å˜åŒ–ã€‚
                    </p>

                    <div class="demo-container">
                        <div class="form-grid">
                            <div>
                                <div class="form-group">
                                    <label>æ•°æ®æºé…ç½®:</label>
                                    <select v-model="dataSource" @change="resetDataFlow">
                                        <option value="realtime">å®æ—¶æ•°æ®</option>
                                        <option value="batch">æ‰¹é‡æ•°æ®</option>
                                        <option value="cached">ç¼“å­˜æ•°æ®</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label>æ›´æ–°é¢‘ç‡ (ç§’):</label>
                                    <input type="range" v-model.number="updateFrequency" min="1" max="10" step="1">
                                    <span>{{ updateFrequency }}ç§’</span>
                                </div>
                                <div class="form-group">
                                    <label>æ•°æ®è¿‡æ»¤é˜ˆå€¼:</label>
                                    <input type="range" v-model.number="filterThreshold" min="0" max="100" step="5">
                                    <span>{{ filterThreshold }}%</span>
                                </div>
                            </div>
                            <div>
                                <div class="form-group">
                                    <button class="btn" @click="startDataFlow" :disabled="dataFlowActive">å¯åŠ¨æ•°æ®æµ</button>
                                    <button class="btn danger" @click="stopDataFlow" :disabled="!dataFlowActive">åœæ­¢æ•°æ®æµ</button>
                                    <button class="btn" @click="pauseDataFlow" :disabled="!dataFlowActive || dataFlowPaused">æš‚åœ</button>
                                    <button class="btn success" @click="resumeDataFlow" :disabled="!dataFlowPaused">æ¢å¤</button>
                                </div>
                                <div class="form-group">
                                    <label>æ•°æ®æµçŠ¶æ€:</label>
                                    <div class="progress-bar">
                                        <div class="progress-fill" :style="{ width: dataFlowProgress + '%' }"></div>
                                    </div>
                                    <span>{{ dataFlowProgress }}%</span>
                                </div>
                            </div>
                        </div>

                        <div class="chart-container">
                            <h4>ğŸ“ˆ æ•°æ®æµå¯è§†åŒ–</h4>
                            <div class="chart-bar" v-for="item in chartData" :key="item.label">
                                <div class="chart-label">{{ item.label }}</div>
                                <div class="chart-bar-fill" :style="{ width: (item.value / maxChartValue * 200) + 'px' }"></div>
                                <div class="chart-value">{{ item.value }}</div>
                            </div>
                        </div>

                        <div class="result-display">
                            <h4>ğŸ“Š æ•°æ®æµç»Ÿè®¡</h4>
                            <div class="result-item"><strong>åŸå§‹æ•°æ®ç‚¹:</strong> {{ rawDataPoints.length }}</div>
                            <div class="result-item"><strong>è¿‡æ»¤åæ•°æ®:</strong> {{ filteredDataPoints.length }}</div>
                            <div class="result-item"><strong>å¹³å‡å€¼:</strong> {{ averageValue.toFixed(2) }}</div>
                            <div class="result-item"><strong>æœ€å¤§å€¼:</strong> {{ maxValue }}</div>
                            <div class="result-item"><strong>æœ€å°å€¼:</strong> {{ minValue }}</div>
                            <div class="result-item"><strong>æ•°æ®è´¨é‡:</strong> {{ dataQuality }}%</div>
                        </div>
                    </div>
                </div>

                <!-- é€šçŸ¥ç»„ä»¶ -->
                <div v-if="notification.show" class="notification" :class="[notification.type, { show: notification.show }]">
                    {{ notification.message }}
                </div>

                <!-- å­¦ä¹ æç¤º -->
                <div class="tips">
                    <h4>ğŸ’¡ é«˜çº§æŠ€å·§</h4>
                    <ul>
                        <li><strong>watchEffectï¼š</strong>è‡ªåŠ¨è¿½è¸ªä¾èµ–ï¼Œé€‚åˆå¤æ‚çš„å‰¯ä½œç”¨é€»è¾‘</li>
                        <li><strong>è®¡ç®—å±æ€§ setterï¼š</strong>å®ç°åŒå‘æ•°æ®ç»‘å®šå’Œå¤æ‚è½¬æ¢</li>
                        <li><strong>ä¾¦å¬å™¨æ¸…ç†ï¼š</strong>é¿å…å†…å­˜æ³„æ¼ï¼ŒåŠæ—¶åœæ­¢ä¸éœ€è¦çš„ä¾¦å¬å™¨</li>
                        <li><strong>flush æ—¶æœºï¼š</strong>æ§åˆ¶ä¾¦å¬å™¨çš„æ‰§è¡Œæ—¶æœºï¼ˆpreã€postã€syncï¼‰</li>
                        <li><strong>æ·±åº¦ä¾¦å¬ï¼š</strong>ç›‘æ§åµŒå¥—å¯¹è±¡çš„å˜åŒ–ï¼Œæ³¨æ„æ€§èƒ½å½±å“</li>
                        <li><strong>ç«‹å³æ‰§è¡Œï¼š</strong>ä¾¦å¬å™¨åˆ›å»ºæ—¶ç«‹å³æ‰§è¡Œä¸€æ¬¡</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <script>
        const { createApp, ref, computed, watch, watchEffect, onUnmounted } = Vue

        createApp({
            setup() {
                // ç”¨æˆ·è®¾ç½®ç›¸å…³
                const userSettings = ref({
                    username: 'user123',
                    theme: 'light',
                    language: 'zh',
                    notifications: {
                        email: true,
                        push: false,
                        sms: false
                    },
                    autoSaveInterval: 30
                })

                const settingsUpdateCount = ref(0)
                const lastSaveTime = ref('')
                const settingsHash = ref('')

                // å§“åç›¸å…³
                const firstName = ref('å¼ ')
                const lastName = ref('ä¸‰')

                // æ¸©åº¦ç›¸å…³
                const celsius = ref(25)

                // ä»·æ ¼ç›¸å…³
                const priceInCents = ref(1000)

                // å®šæ—¶å™¨ç›¸å…³
                const timerInterval = ref(1000)
                const timerCount = ref(0)
                const timerRunning = ref(false)
                const activeWatchers = ref([])

                // API ç›‘æ§ç›¸å…³
                const selectedEndpoint = ref('')
                const apiMonitoring = ref(false)
                const apiRequestCount = ref(0)
                const lastApiResponse = ref('')

                // æ—¥å¿—ç›¸å…³
                const loggingActive = ref(false)
                const systemLogs = ref([])

                // æ•°æ®æµç›¸å…³
                const dataSource = ref('realtime')
                const updateFrequency = ref(2)
                const filterThreshold = ref(50)
                const dataFlowActive = ref(false)
                const dataFlowPaused = ref(false)
                const dataFlowProgress = ref(0)
                const rawDataPoints = ref([])

                // æ ‡ç­¾é¡µ
                const activeTab = ref('timer')

                // é€šçŸ¥
                const notification = ref({
                    show: false,
                    type: 'success',
                    message: ''
                })

                // è®¡ç®—å±æ€§ - å¯ç”¨çš„é€šçŸ¥
                const enabledNotifications = computed(() => {
                    const notifications = userSettings.value.notifications
                    return Object.keys(notifications).filter(key => notifications[key])
                })

                // è®¡ç®—å±æ€§ - å…¨åï¼ˆgetter/setterï¼‰
                const fullName = computed({
                    get() {
                        return `${firstName.value} ${lastName.value}`.trim()
                    },
                    set(value) {
                        const parts = value.split(' ')
                        firstName.value = parts[0] || ''
                        lastName.value = parts.slice(1).join(' ') || ''
                    }
                })

                // è®¡ç®—å±æ€§ - åæ°åº¦ï¼ˆgetter/setterï¼‰
                const fahrenheit = computed({
                    get() {
                        return Math.round((celsius.value * 9/5 + 32) * 100) / 100
                    },
                    set(value) {
                        celsius.value = Math.round(((value - 32) * 5/9) * 100) / 100
                    }
                })

                // è®¡ç®—å±æ€§ - ä»·æ ¼è½¬æ¢ï¼ˆgetter/setterï¼‰
                const priceInYuan = computed({
                    get() {
                        return Math.round(priceInCents.value / 100 * 100) / 100
                    },
                    set(value) {
                        priceInCents.value = Math.round(value * 100)
                    }
                })

                // è®¡ç®—å±æ€§ - è¿‡æ»¤åçš„æ•°æ®
                const filteredDataPoints = computed(() => {
                    return rawDataPoints.value.filter(point => point.value >= filterThreshold.value)
                })

                // è®¡ç®—å±æ€§ - ç»Ÿè®¡ä¿¡æ¯
                const averageValue = computed(() => {
                    if (filteredDataPoints.value.length === 0) return 0
                    const sum = filteredDataPoints.value.reduce((acc, point) => acc + point.value, 0)
                    return sum / filteredDataPoints.value.length
                })

                const maxValue = computed(() => {
                    if (filteredDataPoints.value.length === 0) return 0
                    return Math.max(...filteredDataPoints.value.map(p => p.value))
                })

                const minValue = computed(() => {
                    if (filteredDataPoints.value.length === 0) return 0
                    return Math.min(...filteredDataPoints.value.map(p => p.value))
                })

                const dataQuality = computed(() => {
                    if (rawDataPoints.value.length === 0) return 100
                    return Math.round((filteredDataPoints.value.length / rawDataPoints.value.length) * 100)
                })

                // è®¡ç®—å±æ€§ - å›¾è¡¨æ•°æ®
                const chartData = computed(() => {
                    const recent = filteredDataPoints.value.slice(-5)
                    return recent.map((point, index) => ({
                        label: `æ•°æ®${index + 1}`,
                        value: point.value
                    }))
                })

                const maxChartValue = computed(() => {
                    if (chartData.value.length === 0) return 100
                    return Math.max(...chartData.value.map(item => item.value))
                })

                // watchEffect - è‡ªåŠ¨è¿½è¸ªç”¨æˆ·è®¾ç½®å˜åŒ–
                watchEffect(() => {
                    // è‡ªåŠ¨è¿½è¸ª userSettings çš„æ‰€æœ‰å˜åŒ–
                    const hash = generateHash(JSON.stringify(userSettings.value))
                    settingsHash.value = hash
                    settingsUpdateCount.value++
                    
                    // è‡ªåŠ¨ä¿å­˜åˆ° localStorage
                    try {
                        localStorage.setItem('userSettings', JSON.stringify(userSettings.value))
                        lastSaveTime.value = new Date().toLocaleTimeString()
                    } catch (error) {
                        console.error('ä¿å­˜è®¾ç½®å¤±è´¥:', error)
                    }
                })

                // ä¾¦å¬å™¨ - æ•°æ®æºå˜åŒ–
                watch(dataSource, (newSource) => {
                    showNotification('success', `æ•°æ®æºå·²åˆ‡æ¢åˆ°: ${newSource}`)
                    addLog('INFO', `æ•°æ®æºåˆ‡æ¢: ${newSource}`)
                })

                // ä¾¦å¬å™¨ - è¿‡æ»¤é˜ˆå€¼å˜åŒ–
                watch(filterThreshold, (newThreshold) => {
                    addLog('DEBUG', `è¿‡æ»¤é˜ˆå€¼æ›´æ–°: ${newThreshold}%`)
                })

                // æ–¹æ³•
                const generateHash = (str) => {
                    let hash = 0
                    for (let i = 0; i < str.length; i++) {
                        const char = str.charCodeAt(i)
                        hash = ((hash << 5) - hash) + char
                        hash = hash & hash // è½¬æ¢ä¸º32ä½æ•´æ•°
                    }
                    return Math.abs(hash).toString(16).substring(0, 8)
                }

                const showNotification = (type, message) => {
                    notification.value = { show: true, type, message }
                    setTimeout(() => {
                        notification.value.show = false
                    }, 3000)
                }

                const addLog = (level, message) => {
                    if (!loggingActive.value) return
                    
                    const log = {
                        id: Date.now(),
                        time: new Date().toLocaleTimeString(),
                        level,
                        message
                    }
                    systemLogs.value.unshift(log)
                    
                    // åªä¿ç•™æœ€è¿‘100æ¡æ—¥å¿—
                    if (systemLogs.value.length > 100) {
                        systemLogs.value = systemLogs.value.slice(0, 100)
                    }
                }

                const getLogColor = (level) => {
                    const colors = {
                        'ERROR': '#e17055',
                        'WARN': '#fdcb6e',
                        'INFO': '#74b9ff',
                        'DEBUG': '#636e72'
                    }
                    return colors[level] || '#2d3436'
                }

                // å®šæ—¶å™¨æ–¹æ³•
                const startTimer = () => {
                    if (timerRunning.value) return
                    
                    timerRunning.value = true
                    const stopWatcher = watch(timerInterval, () => {
                        if (timerRunning.value) {
                            stopTimer()
                            startTimer()
                        }
                    })
                    activeWatchers.value.push(stopWatcher)
                    
                    const interval = setInterval(() => {
                        if (!timerRunning.value) {
                            clearInterval(interval)
                            return
                        }
                        timerCount.value++
                        addLog('DEBUG', `è®¡æ—¶å™¨è®¡æ•°: ${timerCount.value}`)
                    }, timerInterval.value)
                    
                    showNotification('success', 'è®¡æ—¶å™¨å·²å¯åŠ¨')
                    addLog('INFO', 'è®¡æ—¶å™¨å¯åŠ¨')
                }

                const stopTimer = () => {
                    timerRunning.value = false
                    showNotification('warning', 'è®¡æ—¶å™¨å·²åœæ­¢')
                    addLog('INFO', 'è®¡æ—¶å™¨åœæ­¢')
                }

                const resetTimer = () => {
                    timerCount.value = 0
                    showNotification('success', 'è®¡æ—¶å™¨å·²é‡ç½®')
                    addLog('INFO', 'è®¡æ—¶å™¨é‡ç½®')
                }

                // API ç›‘æ§æ–¹æ³•
                const startApiMonitoring = () => {
                    if (!selectedEndpoint.value) {
                        showNotification('error', 'è¯·å…ˆé€‰æ‹©APIç«¯ç‚¹')
                        return
                    }
                    
                    apiMonitoring.value = true
                    const stopWatcher = watch(selectedEndpoint, (newEndpoint) => {
                        if (newEndpoint) {
                            addLog('INFO', `APIç«¯ç‚¹åˆ‡æ¢: ${newEndpoint}`)
                        }
                    })
                    activeWatchers.value.push(stopWatcher)
                    
                    const interval = setInterval(() => {
                        if (!apiMonitoring.value) {
                            clearInterval(interval)
                            return
                        }
                        
                        apiRequestCount.value++
                        lastApiResponse.value = `${selectedEndpoint.value} - ${new Date().toLocaleTimeString()}`
                        addLog('DEBUG', `APIè¯·æ±‚: ${selectedEndpoint.value}`)
                    }, 3000)
                    
                    showNotification('success', 'APIç›‘æ§å·²å¯åŠ¨')
                    addLog('INFO', 'APIç›‘æ§å¯åŠ¨')
                }

                const stopApiMonitoring = () => {
                    apiMonitoring.value = false
                    showNotification('warning', 'APIç›‘æ§å·²åœæ­¢')
                    addLog('INFO', 'APIç›‘æ§åœæ­¢')
                }

                // æ—¥å¿—æ–¹æ³•
                const startLogging = () => {
                    loggingActive.value = true
                    showNotification('success', 'æ—¥å¿—è®°å½•å·²å¯åŠ¨')
                    addLog('INFO', 'ç³»ç»Ÿæ—¥å¿—è®°å½•å¯åŠ¨')
                }

                const stopLogging = () => {
                    addLog('INFO', 'ç³»ç»Ÿæ—¥å¿—è®°å½•åœæ­¢')
                    loggingActive.value = false
                    showNotification('warning', 'æ—¥å¿—è®°å½•å·²åœæ­¢')
                }

                const clearLogs = () => {
                    systemLogs.value = []
                    showNotification('success', 'æ—¥å¿—å·²æ¸…ç©º')
                }

                // æ•°æ®æµæ–¹æ³•
                const startDataFlow = () => {
                    dataFlowActive.value = true
                    dataFlowPaused.value = false
                    dataFlowProgress.value = 0
                    
                    const interval = setInterval(() => {
                        if (!dataFlowActive.value || dataFlowPaused.value) {
                            if (!dataFlowActive.value) clearInterval(interval)
                            return
                        }
                        
                        // ç”Ÿæˆæ¨¡æ‹Ÿæ•°æ®
                        const newPoint = {
                            id: Date.now(),
                            value: Math.round(Math.random() * 100),
                            timestamp: new Date().toLocaleTimeString()
                        }
                        rawDataPoints.value.push(newPoint)
                        
                        // åªä¿ç•™æœ€è¿‘50ä¸ªæ•°æ®ç‚¹
                        if (rawDataPoints.value.length > 50) {
                            rawDataPoints.value = rawDataPoints.value.slice(-50)
                        }
                        
                        dataFlowProgress.value = Math.min(dataFlowProgress.value + 2, 100)
                        addLog('DEBUG', `æ•°æ®ç‚¹ç”Ÿæˆ: ${newPoint.value}`)
                    }, updateFrequency.value * 1000)
                    
                    showNotification('success', 'æ•°æ®æµå·²å¯åŠ¨')
                    addLog('INFO', 'æ•°æ®æµå¯åŠ¨')
                }

                const stopDataFlow = () => {
                    dataFlowActive.value = false
                    dataFlowPaused.value = false
                    showNotification('warning', 'æ•°æ®æµå·²åœæ­¢')
                    addLog('INFO', 'æ•°æ®æµåœæ­¢')
                }

                const pauseDataFlow = () => {
                    dataFlowPaused.value = true
                    showNotification('warning', 'æ•°æ®æµå·²æš‚åœ')
                    addLog('INFO', 'æ•°æ®æµæš‚åœ')
                }

                const resumeDataFlow = () => {
                    dataFlowPaused.value = false
                    showNotification('success', 'æ•°æ®æµå·²æ¢å¤')
                    addLog('INFO', 'æ•°æ®æµæ¢å¤')
                }

                const resetDataFlow = () => {
                    rawDataPoints.value = []
                    dataFlowProgress.value = 0
                    addLog('INFO', 'æ•°æ®æµé‡ç½®')
                }

                // æ¸…ç†å‡½æ•°
                onUnmounted(() => {
                    activeWatchers.value.forEach(stop => stop())
                    activeWatchers.value = []
                })

                return {
                    // ç”¨æˆ·è®¾ç½®
                    userSettings,
                    settingsUpdateCount,
                    lastSaveTime,
                    settingsHash,
                    enabledNotifications,
                    
                    // å§“å
                    firstName,
                    lastName,
                    fullName,
                    
                    // æ¸©åº¦
                    celsius,
                    fahrenheit,
                    
                    // ä»·æ ¼
                    priceInCents,
                    priceInYuan,
                    
                    // å®šæ—¶å™¨
                    timerInterval,
                    timerCount,
                    timerRunning,
                    activeWatchers,
                    startTimer,
                    stopTimer,
                    resetTimer,
                    
                    // API ç›‘æ§
                    selectedEndpoint,
                    apiMonitoring,
                    apiRequestCount,
                    lastApiResponse,
                    startApiMonitoring,
                    stopApiMonitoring,
                    
                    // æ—¥å¿—
                    loggingActive,
                    systemLogs,
                    startLogging,
                    stopLogging,
                    clearLogs,
                    getLogColor,
                    
                    // æ•°æ®æµ
                    dataSource,
                    updateFrequency,
                    filterThreshold,
                    dataFlowActive,
                    dataFlowPaused,
                    dataFlowProgress,
                    rawDataPoints,
                    filteredDataPoints,
                    averageValue,
                    maxValue,
                    minValue,
                    dataQuality,
                    chartData,
                    maxChartValue,
                    startDataFlow,
                    stopDataFlow,
                    pauseDataFlow,
                    resumeDataFlow,
                    resetDataFlow,
                    
                    // UI
                    activeTab,
                    notification
                }
            }
        }).mount('#app')
    </script>
</body>
</html>